import{r as c,j as d}from"./app-OeVJuWrB.js";import{P as x,u as M,a as h}from"./index-D-COHENk.js";import{c as A}from"./utils-DlPYlReR.js";function k(e,t=[]){let a=[];function n(o,s){const r=c.createContext(s),i=a.length;a=[...a,s];const l=m=>{var C;const{scope:f,children:g,...v}=m,p=((C=f==null?void 0:f[e])==null?void 0:C[i])||r,E=c.useMemo(()=>v,Object.values(v));return d.jsx(p.Provider,{value:E,children:g})};l.displayName=o+"Provider";function w(m,f){var p;const g=((p=f==null?void 0:f[e])==null?void 0:p[i])||r,v=c.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[l,w]}const u=()=>{const o=a.map(s=>c.createContext(s));return function(r){const i=(r==null?void 0:r[e])||o;return c.useMemo(()=>({[`__scope${e}`]:{...r,[e]:i}}),[r,i])}};return u.scopeName=e,[n,$(u,...t)]}function $(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const n=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(o){const s=n.reduce((r,{useScope:i,scopeName:l})=>{const m=i(o)[`__scope${l}`];return{...r,...m}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}var S="Avatar",[F,z]=k(S),[T,N]=F(S),_=c.forwardRef((e,t)=>{const{__scopeAvatar:a,...n}=e,[u,o]=c.useState("idle");return d.jsx(T,{scope:a,imageLoadingStatus:u,onImageLoadingStatusChange:o,children:d.jsx(x.span,{...n,ref:t})})});_.displayName=S;var y="AvatarImage",L=c.forwardRef((e,t)=>{const{__scopeAvatar:a,src:n,onLoadingStatusChange:u=()=>{},...o}=e,s=N(y,a),r=B(n,o.referrerPolicy),i=M(l=>{u(l),s.onImageLoadingStatusChange(l)});return h(()=>{r!=="idle"&&i(r)},[r,i]),r==="loaded"?d.jsx(x.img,{...o,ref:t,src:n}):null});L.displayName=y;var j="AvatarFallback",R=c.forwardRef((e,t)=>{const{__scopeAvatar:a,delayMs:n,...u}=e,o=N(j,a),[s,r]=c.useState(n===void 0);return c.useEffect(()=>{if(n!==void 0){const i=window.setTimeout(()=>r(!0),n);return()=>window.clearTimeout(i)}},[n]),s&&o.imageLoadingStatus!=="loaded"?d.jsx(x.span,{...u,ref:t}):null});R.displayName=j;function B(e,t){const[a,n]=c.useState("idle");return h(()=>{if(!e){n("error");return}let u=!0;const o=new window.Image,s=r=>()=>{u&&n(r)};return n("loading"),o.onload=s("loaded"),o.onerror=s("error"),o.src=e,t&&(o.referrerPolicy=t),()=>{u=!1}},[e,t]),a}var b=_,I=L,P=R;const q=c.forwardRef(({className:e,...t},a)=>d.jsx(b,{ref:a,className:A("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));q.displayName=b.displayName;const G=c.forwardRef(({className:e,...t},a)=>d.jsx(I,{ref:a,className:A("aspect-square h-full w-full",e),...t}));G.displayName=I.displayName;const H=c.forwardRef(({className:e,...t},a)=>d.jsx(P,{ref:a,className:A("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));H.displayName=P.displayName;export{q as A,G as a,H as b};
